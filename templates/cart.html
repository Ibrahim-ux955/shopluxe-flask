{% extends 'base.html' %}
{% block content %}
<style>
  /* Make container full width with side padding */
  .container {
    max-width: 600px !important;
    padding: 1rem 1.5rem;
  }

  /* Limit the main cart wrapper width and center */
  .cart-wrapper {
    width: 100%;
    margin-top: 2rem;
  }

  /* Smaller font for pricing summary */
  .pricing-summary {
    font-size: 14px;
  }

  /* Responsive adjustments for small screens */
  @media (max-width: 576px) {
    .container {
      padding: 1rem 1rem;
      max-width: 100% !important;
    }

    .card img {
      width: 50px !important;
      height: 50px !important;
    }

    .pricing-summary {
      font-size: 13px;
    }

    /* Smaller buttons on mobile */
    .btn-sm {
      padding: 0.25rem 0.5rem;
      font-size: 0.75rem;
    }
  }
</style>

<div class="container d-flex justify-content-center">
  <div class="cart-wrapper p-0">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4 class="mb-0 fw-bold">Shopping Cart</h4>
      <a href="{{ url_for('clear_cart') }}" class="text-danger text-decoration-none fw-semibold">Clear All</a>
    </div>

    {% if cart_items %}
      <!-- Cart Items -->
      <div class="mb-4">
        {% for item in cart_items %}
        <div class="card mb-3 shadow-sm p-3 rounded-4 border-0">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <img src="{{ url_for('static', filename='shoes/' ~ item.image) }}" width="60" height="60" class="rounded-3 me-3" style="object-fit: cover;" alt="{{ item.name }}">
              <div>
                <strong>{{ item.name }}</strong><br>
                <span class="text-primary fw-semibold">GHS {{ item.price }}</span>
                <div class="d-flex align-items-center mt-1">
                  <!-- Quantity Buttons -->
                  <a href="{{ url_for('decrease_quantity', index=item.index) }}" class="btn btn-sm btn-light border me-1">-</a>
                  <span class="mx-2">{{ item.quantity }}</span>
                  <a href="{{ url_for('increase_quantity', index=item.index) }}" class="btn btn-sm btn-light border ms-1">+</a>
                </div>
              </div>
            </div>
            <!-- Remove Button -->
            <a href="{{ url_for('remove_from_cart', index=item.index) }}" class="text-danger fs-5 ms-3">
              <i class="bi bi-trash"></i>
            </a>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- Pricing Summary -->
      <div class="mb-3 pricing-summary">
        <div class="d-flex justify-content-between">
          <span>Subtotal</span>
          <span>GHS {{ subtotal }}</span>
        </div>
        <div class="d-flex justify-content-between">
          <span>Tax</span>
          <span>GHS {{ tax }}</span>
        </div>
        <div class="d-flex justify-content-between">
          <span>Shipping</span>
          <span class="text-success">FREE</span>
        </div>
        <hr>
        <div class="d-flex justify-content-between fw-bold fs-5">
          <span>Total</span>
          <span>GHS {{ total }}</span>
        </div>
      </div>

      <!-- Checkout Button -->
      <a href="{{ url_for('checkout') }}" class="btn btn-primary w-100">Proceed to Checkout</a>

    {% else %}
      <p class="text-center text-muted">ðŸ›’ Your cart is empty.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
